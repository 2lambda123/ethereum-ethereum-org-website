---
title: Введение в смарт-контракты
description: Обзор смарт-контрактов с акцентом на их уникальные характеристики и ограничения.
lang: ru
---

## Что такое смарт-контракт? {#what-is-a-smart-contract}

«Умный контракт» — это просто программа, работающая на блокчейне Ethereum. Это набор кода (его функций) и данных (его состояния), который находится по определенному адресу в блокчейне Ethereum.

Смарт-контракты — это тип [аккаунта Ethereum](/developers/docs/accounts/). Это означает, что они имеют баланс и могут быть целью транзакций. Однако они не контролируются пользователем, вместо этого они развертываются в сети и работают, как запрограммировано. Затем учетные записи пользователей могут взаимодействовать со смарт-контрактом, отправляя транзакции, которые выполняют функцию, определенную в смарт-контракте. Смарт-контракты могут определять правила, как и обычный контракт, и автоматически применять их с помощью кода. Смарт-контракты нельзя удалить по умолчанию, а взаимодействия с ними необратимы. 

## Предпосылки {#prerequisites}

Если вы только начинаете или ищете менее техническое введение, мы рекомендуем наше [введение в смарт-контракты](/smart-contracts/). 

Убедитесь, что вы прочиталиn [accounts](/developers/docs/accounts/), [transactions](/developers/docs/transactions/) и [Ethereum virtual machine](/developers/docs/evm/) прежде чем погрузиться в мир смарт-контрактов.

## Цифровой торговый автомат {#a-digital-vending-machine}

Возможно, лучшая метафора смарт-контракта — это торговый автомат, описанный [Ником Сабо] (https://unenumerated.blogspot.com/). При правильном входе гарантирован определенный результат. 

To get a snack from a vending machine:

```
money + snack selection = snack dispensed
```

Эта логика запрограммирована в торговом автомате. 

Смарт-контракт, как и торговый автомат, имеет запрограммированную логику. Вот простой пример того, как этот торговый автомат выглядел бы, если бы он был смарт-контрактом, написанным на Solidity: 

```solidity
pragma solidity 0.8.7;

contract VendingMachine {

    // Объявить переменные состояния контракта
    address public owner;
    mapping (address => uint) public cupcakeBalances;

    // При развертывании контракта «VendingMachine»:
    // 1. установить адрес развертывания в качестве владельца контракта (пекарни)
    // 2. установить баланс (количество кексов) в смарт-контракте на 100
    constructor() {
        owner = msg.sender;
        cupcakeBalances[address(this)] = 100;
    }

    // Разрешить владельцу увеличить количество кексов в пекарне
    function refill(uint amount) public {
        require(msg.sender == owner, "Только владелец может пополнить.");
        cupcakeBalances[address(this)] += amount;
    }

    // Разрешить всем покупать кексы
    function purchase(uint amount) public payable {
        require(msg.value >= amount * 1 ether, "Вы должны заплатить не менее 1 ETH за кекс");
        require(cupcakeBalances[address(this)] >= amount, "Недостаточно капкейков на в пекарне для совершения этой покупки");
        cupcakeBalances[address(this)] -= amount;
        cupcakeBalances[msg.sender] += amount;
    }
}
```

Подобно тому, как торговый автомат устраняет необходимость в работнике пекарни, смарт-контракты могут заменить посредников во многих отраслях. 

## Без цензуры {#permissionless}

Любой может написать смарт-контракт и развернуть его в сети. Вам просто нужно научиться программировать на [языке смарт-контрактов](/developers/docs/smart-contracts/languages/) и иметь достаточно ETH для развертывания вашего контракта. Развертывание смарт-контракта технически является транзакцией, поэтому вам нужно заплатить [Gas](/developers/docs/gas/) так же, как вы платите за газ за простой перевод ETH. Однако затраты на газ для контрактного развертывания намного выше. 

Ethereum имеет удобные для разработчиков языки для написания смарт-контрактов: 

- Solidity
- Vyper

[More on languages](/developers/docs/smart-contracts/languages/)

Однако они должны быть скомпилированы до того, как их можно будет развернуть, чтобы виртуальная машина Ethereum могла интерпретировать и хранить контракт. [Подробнее о компиляции](/developers/docs/smart-contracts/compiling/) 

## Компонуемость {#composability}

Смарт-контракты общедоступны в Ethereum и могут рассматриваться как открытые API. Это означает, что вы можете вызывать другие смарт-контракты в своем собственном смарт-контракте, чтобы значительно расширить возможности. Контракты могут даже развертывать другие контракты. 

Узнать больше о [smart contract composability](/developers/docs/smart-contracts/composability/).

## Ограничения {#limitations}

Смарт-контракты сами по себе не могут получить информацию о «реальных» событиях, потому что они не могут отправлять HTTP-запросы. Это по дизайну. Опора на внешнюю информацию может поставить под угрозу консенсус, который важен для безопасности и децентрализации. 

Есть способы обойти это с помощью [оракулов](/developers/docs/oracles/).

Еще одним ограничением смарт-контрактов является максимальный размер контракта. Смарт-контракт может иметь размер не более 24 КБ, иначе у него закончится газ. Это можно обойти, используя  [The Diamond Pattern](https://eips.ethereum.org/EIPS/eip-2535).

## Мультиподписные контракты {#multisig}
Контракты с несколькими подписями — это учетные записи смарт-контрактов, которые требуют нескольких действительных подписей для выполнения транзакции. Это очень полезно, чтобы избежать единых точек отказа для контрактов, содержащих значительное количество эфира или других токенов. Мультиподписи также разделяют ответственность за выполнение контракта и управление ключами между несколькими сторонами и предотвращают потерю одного закрытого ключа, ведущую к необратимой потере средств. По этим причинам мультиподписные контракты можно использовать для простого управления DAO. Мультиподписи требуют N подписей из M возможных приемлемых подписей (где N ≤ M и M > 1) для выполнения. Обычно используются «N = 3, M = 5» и «N = 4, M = 7». Мультиподпись 4/7 требует четырех из семи возможных действительных подписей. Это означает, что средства все еще можно получить, даже если три подписи будут потеряны. В этом случае это также означает, что большинство держателей ключей должны согласиться и подписать договор, чтобы контракт был выполнен. 

## Ресурсы смарт-контракта {#smart-contract-resources}

**OpenZeppelin Contracts -** **_Library for secure smart contract development._**

- [openzeppelin.com/contracts/](https://openzeppelin.com/contracts/)
- [GitHub](https://github.com/OpenZeppelin/openzeppelin-contracts)
- [Community Forum](https://forum.openzeppelin.com/c/general/16)

**DappSys -** **_Safe, simple, flexible building-blocks for smart-contracts._**

- [Dappsys](https://dappsys.readthedocs.io/)
- [GitHub](https://github.com/dapphub/dappsys)

## читайте также {#further-reading}

- [Смарт-контракты: технология блокчейн, которая заменит юриста](https://blockgeeks.com/guides/smart-contracts/) _– Blockgeeks_
- [Лучшие практики разработки смарт-контрактов](https://yos.io/2019/11/10/smart-contract-development-best-practices/) _– Nov 10, 2019 - Yos Riady_
- [Чистые контракты — руководство по шаблонам и практикам смарт-контрактов](https://www.wslyvh.com/clean-contracts/) _– Jul 30, 2020 - wslyvh_
